{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="bg-[var(--indigo-dark)] min-h-screen text-[var(--white)] pb-10 font-bevietnam">

  <!-- Header Section -->
  <div class="relative h-64 flex items-center justify-center mb-12">
    <div class="absolute inset-0">
      <img src="{% static 'image/hero.png' %}" alt="Coach Background" class="w-full h-full object-cover">
      <div class="absolute inset-0 bg-black/60"></div>
    </div>
    <h1 class="relative font-bebas text-center text-7xl font-extrabold tracking-wider z-10">
      FIND YOUR PERFECT COACH
    </h1>
  </div>

  <!-- Search + Filter -->
  <div class="max-w-7xl mx-auto px-6">
    <div data-aos="fade-up" class="relative mb-10 flex justify-center">
      <form method="get" action="{% url 'users:coach_list' %}" class="w-full md:w-2/3">
        <input 
          name="q" 
          value="{{ search_query }}" 
          type="text" 
          placeholder="Search Coach, Sport, or Location"
          class="w-full bg-[var(--indigo-light)] border border-gray-700 rounded-xl py-3 px-4 pl-12 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--yellow)]" />
        <button type="submit" class="hidden"></button>
      </form>

      <svg xmlns="http://www.w3.org/2000/svg"
        class="hidden md:block w-5 h-5 absolute left-[calc(50%-33%)] top-1/2 -translate-y-1/2 text-gray-400"
        fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-4.35-4.35M17 10a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
    </div>

    <!-- Coach Grid -->
    <div id="coachGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
      {% if coaches %}
        {% for coach in coaches %}
          <a href="{% url 'users:coach_detail' coach.id %}" 
             class="bg-[var(--indigo)] p-4 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1.5 transition-all duration-300 flex flex-col group">
            
            <!-- Foto -->
            <div class="rounded-xl overflow-hidden w-full aspect-square mb-4">
            {% if coach.profile_photo %}
                <img src="{{ coach.profile_photo.url }}" 
                    alt="{{ coach.user.username }}" 
                    class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
            {% else %}
                <img src="https://icon-library.com/images/default-profile-icon/default-profile-icon-24.jpg" 
                    alt="{{ coach.user.username }}" 
                    class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
            {% endif %}

            </div>

            <!-- Nama -->
            <h2 class="text-2xl font-bold mb-1 tracking-wide font-bebas">
              {{ coach.user.get_full_name }}
            </h2>

            <!-- Sport + Kota -->
            <p class="text-sm text-white/60 mb-3">
              {{ coach.get_sport_display }} Â· {{ coach.city }}
            </p>

            <!-- Fee -->
            <p class="text-md font-semibold mt-auto text-white/90">
              IDR {{ coach.hourly_fee }}/hour
            </p>
          </a>
        {% endfor %}
      {% else %}
        <div id="emptyState" class="text-center mt-10 text-white/60">
          <p>No coaches found.</p>
        </div>
      {% endif %}
    </div>

    <!-- ðŸ”˜ Button Show All Coaches -->
    {% if search_query %}
      <div class="flex justify-center mt-12">
        <a href="{% url 'users:coach_list' %}"
          class="bg-[var(--yellow)] hover:bg-yellow-400 text-black font-semibold py-3 px-8 rounded-full shadow-md transition-all duration-300">
          Show All Coaches
        </a>
      </div>
    {% endif %}

  </div>
</div>
{% endblock %}
